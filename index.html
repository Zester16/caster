<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>RaaSa</title>
  </head>
  <body>
<google-cast-launcher></google-cast-launcher>
  </body>
  <script type="text/javascript">
    window['__onGCastApiAvailable'] = function(isAvailable) {
  if (isAvailable) {
    initializeCastApi();
  }
};
var castSession
var classicR="https://edge52.streams.klassikradio.de/klassikradio-deutschland"
initializeCastApi = async function() {
cast.framework.CastContext.getInstance().setOptions({
    receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID
  });
 castSession = await cast.framework.CastContext.getInstance().getCurrentSession();
//   var mediaInfo = new chrome.cast.media.MediaInfo("https://edge52.streams.klassikradio.de/klassikradio-deutschland", "audio/mp3");
// var request = new chrome.cast.media.LoadRequest(mediaInfo);
// if(castSession){
//   castSession.loadMedia(request).then(
//     function() { console.log('Load succeed'); },
//     function(errorCode) { console.log('Error code: ' + errorCode); });
// }
};
async function  startRadio(streamUrl){
  await initializeCastApi()
  if(castSession){
    console.log(streamUrl)
      var mediaInfo = new chrome.cast.media.MediaInfo(streamUrl, "audio/mp3");
     var request = new chrome.cast.media.LoadRequest(mediaInfo);
      if(castSession){
        castSession.loadMedia(request).then(
          function() { console.log('Load succeed'); },
          function(errorCode) { console.log('Error code: ' + errorCode); });
  }

}
}
  </script>

  <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
</html>
